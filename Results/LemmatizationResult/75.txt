еще один взгляд на вопрос нужный ли дефрагметация для хабр все сервис хабр сообщество специалист ответ на любой вопрос об профессиональный развитие в удаленный работа для специалист как становиться автор удаленка опыт и лайфхаки мегапост опрос про умность барьер для стартапов и онлайн игра весь поток разработка научпоп администрирование дизайн менеджмент маркетинг входить регистрация сегодня в еще один взгляд на вопрос нужный ли дефрагметация для хранение данный компьютерный железо несомненно вопрос вынести в заголовок статья не новый подниматься не раз и по он достигать консенсус не особо нужный и даже мочь быть вредный однако недавний обсуждение в комментарий заставлять я еще раз задумываться со время любой все равный сильно фрагментироваться внутри в свежезаписанный при линейный чтение давать высокий скорость а уже поработать гораздо низко потому что линейный оно быть только для вы да обычно такой не должно происходить или мы писать понемногу в мелкий файл небольшой блок метаинформация фс скорость линейный чтение который мы не особо волновать либо же мы писать помногу в большой файл и все быть хорошо бывать и дозапись мелкий блок в большой файл лог например однако они относительно короткоживущий и особый проблема я тут не видеть но легко представляться вполне реальный сценарий при который все таки внутренний фрагментация мочь проявляться файл база данные в который идти достаточно активный случайный запись со время он оставаться нефрагментировать на уровень операционный система оказываться физически очень даже фрагментировать что мочь существенно снижать скорость резервный копирование и т п для проверка я написать скрипт и проводить тест спойлер проблема присутствовать существенно влиять на производительность только на один из попадаться под рука модель и тот позиционироваться производитель не как а как десктопный ноутбучный про что тут вообще речь какой еще фрагментация внутри если в два слово устраивать очень непросто в можно писать точно стирать только большой блок а операционный система видеть как набор байтовый или байтовый сектор каждый из который мочь быть адресовать независимо чтобы как то это совмещать придумывать такой вещь как данный во память лежать не последовательно а очень условно в тот порядок как они быть записывать что то вроде структурированный файловый система такой структура очень хорошо обрабатывать случайный запись превращать она в последовательный но увы ничто не бывать бесплатно в результат зачастую последовательный чтение превращаться в случайный алгоритм по который работать закрывать однако насколько мы мочь судить у разный производитель они мочь кардинальный различаться соответственно кардинальный мочь различаться и поведение накопитель под нагрузка именно это мы и быть исследовать идея скрипт создавать файл на несколько гигабайт заполнять случайный данные замеривать скорость последовательный чтение далее использовать случайный доступ переписывать часть тестовый файл и снова измерять скорость линейный чтение если наш подозрение верный то теперь чтение из файл быть идти медленно после каждый запись делать по три операция чтение с задержка между они на случай если какой то накопитель в фон производить дефрагментация и потом скорость чтение улучшаться немного о то почему нужно заполнять перед тестированиемень раз встречать обзор в который запускать чтение с новый накопитель получать какой то фантастический цифра и ничтоже сумняшесь публиковать они через какой то время тест повторять уже на не столь девственный диск и вдруг оказываться что время доступ вырастать а скорость соответственно упасть дело в поддержка контроллер внутри мочь знать что в конкретный блок нет полезный данные информация об это храниться в и при запрос на чтение из такой блок он не обращаться к медленный а сразу возвращать ноль на новый накопитель весь блок помечать как неиспользуемый соответственно в тесто на чтение он готовый ставить рекорд только мы же интересовать с какой скорость уметь отдавать не ноль а данный кроме это некоторые накопитель уметь сжимать данные и на хорошо сжимать тестовый данные мочь показывать не совсем тот результат который быть в реальный жизнь поэтому перед тестирование стоять заполнять несжимаемый данные в хороший источник мочь служить шелловский скрипттестовый файл создаваться в текущий каталог тестировать только под и из с другой дистрибутив навряд ли быть проблема а вот под и другой операционный система скоро все скрипт приходиться допиливать обнаруживаться что накопитель у я сейчас только на сервер с приходиться с помощь гугл и какой то мать слеплять вариант и под винд вариант на из внешний зависимость только путь к файл и временный файл указываться в первый строчка скрипт получать следующий результат фоновый дефрагментация в тестировать модель не обнаруживать скорость чтение не повышаться через некоторый время после запись в тот число длительный отстой час и даже более сутки ничто не менять поэтому в таблица низко приводить просто хороший результат из три запуск под почему тот время чтение менее стабильно и оказываться высоко ожидать впрочем возможно дело в то что этот сервер оказываться более нагружать продолжение запись сверх указывать в скрипт перезапись файл много один раз не влиять на производительность время чтение в секунда файл размер гб для разный диск диск первый чтение после последовательный заполнение файл после случайный запись мб мб мб мб жирный отмечать модель остальной десктопный ноутбучный где а где думать видно без пояснение мы видеть что по мера случайный запись в файл у самсунг скорость чтение падать и в итог упасть вдвое но оставаться правда достаточно неплохой а у единственный тошиба в таблица вовсе в раз фактически сравниваться с таковой у устройство с другой сторона у большинство устройство случайный запись или вовсе не повлиять на производительность или повлиять незначительно мой интерпретация этот результат скорость линейный чтение у действительно мочь деградировать со время однако деградация вызывать внутренний фрагментация не носить совсем уж фатальный характер на большинство диск на диск например она вовсе незаметный на диск если и заметный все равный скорость чтение оставаться вполне приемлемый оставаться открытый вопрос деградировать ли скорость чтение со время по другой причина например из за износ мочь сказать про тошиба разница в поведение между диск на который по быть записывать тб и новый диск я не замечать или перезапись недостаточно чтобы износ становиться заметный или он вовсе не влиять на производительность по повод падение производительность после случайный запись у я как раз на такой тошиба храниться достаточно нагружать бд размер около гб действительно в полный соответствие с излагать выше теория и измерение скорость чтение боевой таблица оказываться достаточно низкий около мб с скорость же чтение другой крупный файл с тот же файловый система гораздо высокий гб с как бороться с внутренний фрагментация если хотеться побороть то можно воспользоваться один из первый метод дефрагментация делать бэкап удалять файл восстанавливать из бэкап недостаток этот метод в то что он достаточно долгий и подразумевать а через некоторый время данные во флеш память снова оказываться фрагментировать и все приходиться повторять сначала так что просто или смиряться или выбирать диск который не подверженный этот проблема придумывать относительно быстрый способ избавляться от внутренний и только от внутренний фрагментация он можно запускать на живой система без размонтирование фс и остановка сервис он тоже мочь приводить к некоторый простой из за замораживание фс но при желание можно разбивать он на несколько итерация чтобы уменьшать время на который замораживаться ввод вывод быть еще один но я не уверенный на что все правильно обрабатывать ситуация писать ноль в область для который до это делать то быть с точка зрение накопитель область фс на который ранее делать мочь теперь считаться не свободный а занятый данные в целое рекомендация забивать смиряться или выбирать диск оставаться в сила резюме дефрагментация мочь быть полезный для некоторые однако не совсем такой совсем не такой как для мы важно не только то что файл располагать в непрерывный цепочка сектор но и то что запись в этот сектор идти последовательно быть бы благодарный если бы читатель запускать скрипт у себя и приводить цифра для свой так как мой выборка накопитель достаточно однобокий тег дефрагментация добавлять метка хаб хранение данный компьютерный железо указывать причина минус чтобы автор поработать над ошибка отправлять анонимно помечать публикация свой метка метка хорошо разделять запятая например программирование алгоритм сохранять умный асфальт смарт кастет а какой умный вещь предлагать ты проходить опрос реклама редакторский дайджест присылать хороший статья раз в месяц скоро на этот адрес прийти письмо подтвердить подписка если все в сила поделиться скопировать ссылка вконтакте выбирать рекомендация для отправка автор указывать только блог орфографический ошибка пунктуационный ошибка отступ текст простыня короткий предложение смайлик много форматирование картинка ссылка оформление код рекламный характер отправлять нарушение описывать суть нарушение отправлять немного программист немного админ платежный система похожий публикация январь в для геймер и хранение данный будущее на январь в удалять все как стереть данный и вернуть к заводской настройка декабрь в делиться опыт как показывать себя в рамка и какой уровень массив выгодно вакансия от до москва технический писатель специалист по документирование база данные и от до инфокультура москва можно удаленный аналитик данные продуктовый аналитик от до москва от до можно удаленный администратор база данные и от до абсолют банк санкт петербург большой вакансия на хабр карьера похищать этот баннер но баннер не зуб отрастать подробно реклама комментарий сегодня в а почему вообще для скорость чтение зависеть от то читать мы последовательно или в случайный порядок позиционирование головка то нет сегодня в вангуй что зависеть от поддерживать контроллер команда обращение к память один поддерживать кэшировать чтение по случайный адрес а другой только последовательный сегодня в в иопс упираться видимо лично я после установка система ссд дефрагментировать пусть системный файл лежать последовательно плохо не быть а несколько гиг ресурс флеш погода не сделать сегодня в последовательно но в же таблица трансляция адрес который ос не контролировать у вы быть замер скорость до и после дефрагментация сегодня в как я уже написать ниже фрагментация на уровень мочь приводить к дополнительный чтение что опять же тратить такой ресурс как сегодня в по идея расположение данные во флеш вообще роль не играть все равный ссд для каждый блок лезть в таблица трансляция то не менее последовательный чтение файл гораздо быстро пока команда доходить до таблица адрес уже сжирать изрядно время цпу и контроллер ссд сегодня в именно а ы складываться из время доступ к матрица например если взять типичный то у она между матрица и шина быть два буфер размер который совпадать с размер страница чтение запись не путать с размер блок стирание он много и при выполнение команда чтение время на загрузка этот буфер не нулевой и вполне конкретный например для это мкс но если изменять алгоритм чтение и задействовать второй буфер то совмещение время выборка данные из матрица и выгрузка они на шина данные позволять получать почти двухкратный прирост при запись этот время ожидать сильно расти накопитель же использовать сразу несколько микросхема в параллель для увеличение скорость чтение запись использовать достаточно крупный набортный буфер озу чтобы скрывать время работа с массив между отсутствие обращение к накопитель со сторона система сам ы тоже развиваться в план достижение более высокий скорость работа но базовый принцип работа это не отменять именно поэтому скорость работа следовать оценивать не по линейный скорость а конкретно по причем не по маркетинговый цифра а в тесто ведь даже если читать фрагментировать большой файл или папка то приходиться делать дополнительный чтение метаданные сегодня в данные последовательно или равномерно и симметрично размазывать по чип и блок флеш не быть находиться быть они часто двигать для выравнивание износ ячейка не только из за запись но даже из за интенсивный чтение сегодня в автор предполагать что возможно это связывать с трансляция блок т е файловый система устраивать блок по байт или кбайт а на диск физически лежать все немного по другой например мочь быть по килобайт или еще как нибудь например страница по кб в этот случай сперва читать кусочек из один страница кратный сектор наш фс а потом другой и так читать по кусочек получаться что мы прочитывать например страница по кб а забирать оттуда например всего х байт такой же проблема с фрагментация быть на но там не только связанный с расположение сектор на диск но и перемещение головка на новый дорожка кстати с появление с сектор к появляться проблема с выравнивание сектор вроде бы этот же проблема появляться и на сегодня в очень правильный вопрос в первоначальный обсуждение мы выяснять что срабатывать эвристика операционный система на упреждать чтение вот с тестовый машина первый попытка последовательный чтение блок по кб включаться упреждать чтение операционный система иметь к второй попытка случайный чтение иметь к операционный система догадываться отключать упреждающий чтение третий попытка последовательный чтение в обход кеш иметь к операционный система не мочь использовать упреждать чтение третий попытка последовательный чтение с явно отключать упреждать чтение иметь к итого именно упреждающий чтение обеспечивать более высокий скорость линейный чтение на операционный система сбрасывать на диск несколько операция чтение сразу что позволять устройство обрабатывать они параллельно почему же при внутренний фрагментация падать скорость линейный чтение сие пока для я тайна великий быть сегодня в вы пытаться бенчмаркать производительность кеш на выключать и посмотреть после это все поделиться на три класс начинать невообразимый тормозить уже круто начинать тормозить за предел добро и зло не поменять производительность наиболее интересный третий они срать на команда выключать и продолжать он делать некоторый самсунг этот грешить быть кондер на устройство мы хороший знать нужный вы или нет сегодня в вы пытаться бенчмаркать производительность кеш на тесто скорость чтение быть кондер на устройство мы хороший знать нужный вы или нет так оно и быть без конденсатор честный начинать тупить под типичный нагрузка бд синхронный запись в лог для то и нужный накопитель чтобы при разумный гарантия сохранность данные иметь хороший производительность сегодня в все сложно база данные использовать что такой зависеть от шина но внутри ядро это для обеспечение интерпретация а зависеть от устройство например рейд с батарейка он игнорировать так же поступать у который быть кондер на борт для завершение запись в случай фейл а быть управление кешом например у серьезный аппаратный рейд выключение кеш он выключать даже если рейд мочь быстро и с ом если сказать выключать значит выключать аналогично должный вести себя и устройство если они сказать выключать кеш значит кеш надо выключать но бывать товарищ который умный все и верить что у они то фирмварь без баг и это игнорировать быть большой разница между игнорирование а и игнорирование команда выключать кеширование на запись сегодня в не представлять ситуация в который действительно мочь потребоваться отключать кеш на диск да и не на тоже надо просто к место вызывать это же быть жутко медленно и с огромный внутри хотя вроде бы быть некоторый кастомерский который работать вовсе без ну и конечно быть который это не нужный сегодня в например если диск под рейд с ом то быть мало хотя все равный быть да Вкл выкла я приводить как метод оценивать реальный производительность и честность вендор сегодня в в можно писать точно стирать только большой блок а операционный система видеть как набор байтовый или байтовый сектор каждый из который мочь быть адресовать независимо насколько большой блок мочь выставлять соответствующий размер сектор сегодня в в современный модель емнип использовать даже по м сегодня в взять первый попадаться даташить на размер мб плюс надо понимать что контроллер многоканальный работать с несколько микросхема сразу то быть эффективный размер блок быть в несколько раз больше сегодня в сказать за себя всегда периодически раз в месяц иногда редко оптимизировать файловый таблица и дефрагментировать при помощь старый бесплатный версия сегодня в раз в пара месяц я бэкапля системный полностью на второй такой же не посекторный и сразу ставить он в машина одновременно и бэкап и его проверка и дефрагментация а кто у мы сейчас в топ для бэкап диск раздел использовать актив диск но это немного не то акронис иногда крыша сносить от свободный место в конец диск гост медленный сегодня в раз в пара месяц я бэкапля системный полностью на второй такой же не посекторный и сразу ставить он в машина одновременно и бэкап и его проверка и дефрагментация да это быть решение для диск вроде упоминаться тут тошиба впрочем на домашний пк случайный запись должно быть немного так что и острый проблема быть не должно сегодня в а кто у мы сейчас в топ для бэкап диск раздел если на накопитель поддерживать файловый система список большой то копироваться и восстанавливаюся только занимать блок лично я предпочитать который использовать все тот же благодаря то что дистрибутив идти под его совершенно легально можно скачать с торрент куда он выкладывать покупатель на оф сайт бесплатный скачивание недоступный сегодня в возможно в данный ситуация иметь смысл говорить не о дефрагментация как физический устройство а о дефрагментация файловый система на оно для снижение накладной расход драйвер сейчас не редкий ситуация когда небольшой файл на распадаться на сотня тысяча кусочек по весь сегодня в как раз наоборот статья про фрагментация внутри она не видно снаружи но можно определять ее наличие по косвенный признак сегодня в прогнать на сервак два в файловый система оба накопитель изнашивать в ноль результат без часовой ожидание в конец только полноправный пользователь мочь оставлять комментарий входить пожалуйста что обсуждать сейчас вчера неделя о плохой работодатель хороший сотрудник страсть по нерабочий неделя стример в зарабатывать тысяча доллар во сон кармический показатель почему это не просто клиент о математика и пандемия о плохой работодатель хороший сотрудник страсть по нерабочий неделя ультрафиолетовый стерилизационный коробка для повторный использование одноразовый маска еще один взгляд на вопрос нужный ли дефрагметация для о математика и пандемия аккуратно за руль как и почему автомобильный новшество провоцировать дтп исследование о плохой работодатель хороший сотрудник страсть по нерабочий неделя право человек и алгоритм брутфорс авторский право не срабатывать в сша австралия россия и ес возможный сценарий распространение самодельный антисептик из то что быть в аптека делать спирт из водка без самогонный аппарат дедовский способ заглядывать внутрь советский интегральный схема с ТТЛ самый читаемый сутки неделя месяц ликбез по респиратор помогать ли респиратор от заражение вирус обзор респиратор о плохой работодатель хороший сотрудник страсть по нерабочий неделя коронавирус почему надо действовать прямо сейчас самодельный антисептик из то что быть в аптека делать спирт из водка без самогонный аппарат дедовский способ объявлять о банкротство возможный сценарий распространение рак интернет самодельный антисептик из то что быть в аптека делать спирт из водка без самогонный аппарат дедовский способ как я изготавливать респиратор в домашний условие из подручный материал подробный инструкция после удаление входить в учетный запись без верификация даже после смена пароль коронавирус почему надо действовать прямо сейчас коронавирус как мы себя обманывать коронавирус только факт без паника коронавирус филогения курение летальность и снижение риск заболевать сервис который становиться бесплатный на время карантин курсы радио книга кино и сериал рекомендовать размещать промой удаленка напряженка топ вопрос и ответ про новый рабочий режим подборка бесплатный сервис на время карантин курсы книга кино и сериал ваш аккаунт входить регистрация раздел публикация новость хаб компания пользователь песочница информация устройство сайт для автор для компания документ соглашение конфиденциальность услуга реклама тариф контент семинар мегапроект если находить опечатка в пост выделять она и нажимать чтобы сообщать автор настройка язык о сайт служба поддержка мобильный версия настройка язык интерфейс русский язык публикация русский английский сохранять настройка